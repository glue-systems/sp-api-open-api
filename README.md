# sp-api-open-api

This package consists of a set of OpenAPI-generated PHP clients for making calls to Amazon Selling Partner API (SP-API).

For more information, please visit [https://sellercentral.amazon.com/gp/mws/contactus.html](https://sellercentral.amazon.com/gp/mws/contactus.html).


## Requirements

PHP 7.2 and later.


## Authorization

This package does not handle authorization. Link coming soon for a recommended package that handles LWA authentication with SP-API.


## How SP-API Client Classes are Generated

The code for each SP-API PHP client in [src/Clients](src/Clients) is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project and organized into namespaces by the developers of Glue Systems, LLC.


## How to Maintain or Contribute to this Repo

As new versions are released for each of the SP-API domains, it will be necessary to upgrade this repo in a systematic fashion. If you are contibuting to or maintaining this repo, make sure to first [install the OpenAPI Generator CLI tool](https://openapi-generator.tech/docs/installation). (The developers at Glue Systems are using the `5.2.0-SNAPSHOT` version of the Java JAR tool.)

Recommended steps for making changes to each of the included clients are listed in the sub-sections below.


### Listings Items API

Here are the steps for generating client classes for `ListingsItemsAPI` via OpenAPI, which can also be used when upgrading the code to match a newer version of the API's JSON schema released by Amazon SP-API:

1. `cd` to the root of your cloned repository.

```BASH
cd path/to/your/sp-api-open-api
```

2. Clear out any existing code from your git-ignored `output` sub-directory.

```BASH
rm -rf output/ListingsItems
```

3. Using [your OpenAPI Generator CLI tool](#how-to-maintain-or-contribute-to-this-repo), generate the API client package.

```BASH
openapi-generator-cli generate -i models/listingsItems_2020-09-01.json -g php -o output/ListingsItems --additional-properties=invokerPackage="Glue\SPAPI\OpenAPI\Clients\ListingsItems"
```

4. Delete the source-controlled version of the API client that is to be replaced by the new output.

```BASH
rm -rf src/Clients/ListingsItems
```

5. Replace the deleted API client with the newly-generated code.
```BASH
mv output/ListingsItems/lib src/Clients/ListingsItems
```

6. Check the git diff carefully. Create a new git release according to the nature of the changes (bug fixes, new features, breaking changes). Document any significant changes so that subscribers to this repository can upgrade their downstream code accordingly.


### Supply Sources API

Here are the steps for generating client classes for `SupplySourcesAPI` via OpenAPI, which can also be used when upgrading the code to match a newer version of the API's JSON schema released by Amazon SP-API:

1. `cd` to the root of your cloned repository.

```BASH
cd path/to/your/sp-api-open-api
```

2. Clear out any existing code from your git-ignored `output` sub-directory.

```BASH
rm -rf output/SupplySources
```

3. Using [your OpenAPI Generator CLI tool](#how-to-maintain-or-contribute-to-this-repo), generate the API client package.

```BASH
openapi-generator-cli generate -i models/supplySources_2020-07-01.json -g php -o output/SupplySources --additional-properties=invokerPackage="Glue\SPAPI\OpenAPI\Clients\SupplySources"
```

4. Delete the source-controlled version of the API client that is to be replaced by the new output.

```BASH
rm -rf src/Clients/SupplySources
```

5. Replace the deleted API client with the newly-generated code.
```BASH
mv output/SupplySources/lib src/Clients/SupplySources
```

6. Check the git diff carefully. Create a new git release according to the nature of the changes (bug fixes, new features, breaking changes). Document any significant changes so that subscribers to this repository can upgrade their downstream code accordingly.


### Definitions Product Types API

Here are the steps for generating client classes for `ProductTypesAPI` via OpenAPI, which can also be used when upgrading the code to match a newer version of the API's JSON schema released by Amazon SP-API:

1. `cd` to the root of your cloned repository.

```BASH
cd path/to/your/sp-api-open-api
```

2. Clear out any existing code from your git-ignored `output` sub-directory.

```BASH
rm -rf output/DefinitionsProductTypes
```

3. Using [your OpenAPI Generator CLI tool](#how-to-maintain-or-contribute-to-this-repo), generate the API client package.

```BASH
openapi-generator-cli generate -i models/definitionsProductTypes_2020-09-01.json -g php -o output/DefinitionsProductTypes --additional-properties=invokerPackage="Glue\SPAPI\OpenAPI\Clients\DefinitionsProductTypes"
```

4. Delete the source-controlled version of the API client that is to be replaced by the new output.

```BASH
rm -rf src/Clients/DefinitionsProductTypes
```

5. Replace the deleted API client with the newly-generated code.
```BASH
mv output/DefinitionsProductTypes/lib src/Clients/DefinitionsProductTypes
```

6. Check the git diff carefully. Create a new git release according to the nature of the changes (bug fixes, new features, breaking changes). Document any significant changes so that subscribers to this repository can upgrade their downstream code accordingly.


### Orders V0 API

Here are the steps for generating client classes for `OrdersV0API` via OpenAPI, which can also be used when upgrading the code to match a newer version of the API's JSON schema released by Amazon SP-API:

1. `cd` to the root of your cloned repository.

```BASH
cd path/to/your/sp-api-open-api
```

2. Clear out any existing code from your git-ignored `output` sub-directory.

```BASH
rm -rf output/OrdersV0
```

3. Using [your OpenAPI Generator CLI tool](#how-to-maintain-or-contribute-to-this-repo), generate the API client package.

```BASH
openapi-generator-cli generate -i models/ordersV0.json -g php -o output/OrdersV0 --additional-properties=invokerPackage="Glue\SPAPI\OpenAPI\Clients\OrdersV0"
```

4. Delete the source-controlled version of the API client that is to be replaced by the new output.

```BASH
rm -rf src/Clients/OrdersV0
```

5. Replace the deleted API client with the newly-generated code.
```BASH
mv output/OrdersV0/lib src/Clients/OrdersV0
```

6. Check the git diff carefully. Create a new git release according to the nature of the changes (bug fixes, new features, breaking changes). Document any significant changes so that subscribers to this repository can upgrade their downstream code accordingly.
